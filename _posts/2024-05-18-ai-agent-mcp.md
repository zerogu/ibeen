---
title: "AI Agent与MCP工具：企业定制AI工作流实践"
date: 2024-05-18
categories:
  - AI
tags:
  - Agent
  - MCP
  - 工作流
  - RAG
---

## AI 工作流与 MCP 工具实践

---

### AI 工作流的行业挑战

<div class="row">
    <div class="col-md-4">
        <h4>意图识别困难</h4>
        <ul>
            <li>AI 系统难以准确识别用户意图并调用正确的 Agent 工具回答问题</li>
        </ul>
    </div>
    <div class="col-md-4">
        <h4>Prompt 优化复杂</h4>
        <ul>
            <li>AI 对 Prompt 的理解顺序与设计意图不一致，影响结果质量</li>
        </ul>
    </div>
    <div class="col-md-4">
        <h4>知识库方案选择</h4>
        <ul>
            <li>传统 RAG、GraphRAG、LightRAG、DeepSearcher 等多种技术方案选择困难</li>
        </ul>
    </div>
</div>

<p>这些挑战直接影响 AI 系统的准确性和实用性，需要通过先进的架构设计和优化策略来解决。</p>

---

### 主流 AI 工作流方案

#### 1. 顺序 Agent 工作流（Sequential Agent）

- 传统单 Agent 流程
- 多 Agent 串联，支持条件判断与全局状态管理
- SOP 化业务流程，结构化输出，意图识别可控

适合需要精细化流程控制的场景。

---

#### 设计反思节点（示例 Prompt）

```tsx
你是一个评估从FAQ文档中检索到的信息与用户问题相关性的评估者。
如果文档包含中的FAQ的答案能直接回复用户的问题的话，请评估其为相关。

注意：不要自己回答问题。只需评估文档与问题的相关性即可。

返回一个 JSON 对象，其中包含两个键：
- score：值为“yes”或“no”，表示文档是否包含至少一些与问题相关的信息。
- reasoning：需要解释做出此决定的理由。
```

---

#### 2. 专家团队模式（Supervisor Worker）

- 多领域专家协作，分工明确
- 只需设定专家背景，自动协作完成复杂任务
- 适合 MCP 等多 Agent 环境

原理类似于 Cursor、Cline 等 AI 客户端产品。

---

### RAG 知识库方案

#### 传统 RAG

- 召回内容无上下文，文档多时效果下降
- 适合 FAQ 类、问答一一对应场景

例：权限申请问题，10 篇文档均被召回，AI 难以区分上下文。

---

#### AI 百科（结构化 RAG）

- 借鉴 Web Search，结构化存储业务知识
- 支持公司级业务知识库、效能数据管理
  - 工作总结
  - 代码百科

---

### MCP 工具介绍

#### 什么是 MCP？

- 一种支持远程通讯协议的 AI 工具调用方式（tool_call）
- 让 AI 像调用 API 一样调用各种后端服务/工具

---

#### MCP 的优势与误区

- **优势**：

  - 统一通讯协议，易于扩展
  - 支持自然语言到工具参数的自动适配
  - 结果可结构化返回，便于 AI 理解

- **常见误区**：
  - 不是简单 API 转接，需考虑自然语言参数解析与结果格式化

---

#### MCP Server 云函数实践

- MCP Server 作为云函数，支持灵活扩展
- 适配多种业务场景，提升 AI 工作流能力

---

### 总结

- AI Agent 与 MCP 结合，助力企业定制高效 AI 工作流
- 结构化 RAG 与专家团队模式，提升 AI 落地效果
- MCP 工具为 AI 与业务系统搭建桥梁，释放 AI 生产力
